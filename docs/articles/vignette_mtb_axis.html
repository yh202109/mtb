<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="mtb">
<title>vignette_mtb_axis â€¢ mtb</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="vignette_mtb_axis">
<meta property="og:description" content="mtb">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mtb</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/vignette_mtb_axis.html">vignette_mtb_axis</a>
    <a class="dropdown-item" href="../articles/vignette_mtb_color.html">vignette_mtb_color</a>
    <a class="dropdown-item" href="../articles/vignette_mtb_md.html">vignette_mtb_markdown</a>
    <a class="dropdown-item" href="../articles/vignette_mtb_timerelated.html">vignette_mtb_time_related</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/yh202109/mtb/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">

<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>vignette_mtb_axis</h1>
                        <h4 data-toc-skip class="author">Y. Hsu</h4>
            
            <h4 data-toc-skip class="date">2022-01-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/yh202109/mtb/blob/HEAD/vignettes/vignette_mtb_axis.Rmd" class="external-link"><code>vignettes/vignette_mtb_axis.Rmd</code></a></small>
      <div class="d-none name"><code>vignette_mtb_axis.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="background---why-using-data-derived-axis-transformation">Background - Why using data derived axis transformation<a class="anchor" aria-label="anchor" href="#background---why-using-data-derived-axis-transformation"></a>
</h2>
<p>For continuous <span class="math inline">\(x\)</span> values, the common options for the <span class="math inline">\(x\)</span>-axis scale could be either linear or log. Assume that the <span class="math inline">\(x\)</span> vector has a smaller number of distinct values. Some of those <span class="math inline">\(x\)</span> values could be clustered tightly while others are far away from the cluster. In such case, the plot could have an area that is overfilled and have other areas that are underused.</p>
<p>The function <code><a href="../reference/trans_composition.html">trans_composition()</a></code> yields linear scale for <span class="math inline">\(x\)</span>-axis below a breaking point. All unique <span class="math inline">\(x\)</span> values above the breaking point will be plotted in equal spaces in between. The function <code><a href="../reference/trans_loglinear.html">trans_loglinear()</a></code> is based on an algorithm derived log transformation such that the <span class="math inline">\(x\)</span> values could be spaced out for easier interpreting.</p>
<p><span style="color: rgba(255,0,0,1); margin: 3px auto 3px auto; font-size:100%">Caution - The use of nonlinear axis scale can be misleading. The use of transformed scales should be clearly noted in the text or on the figure to avoid misleading.</span></p>
</div>
<div class="section level2">
<h2 id="how-to-use">How to use<a class="anchor" aria-label="anchor" href="#how-to-use"></a>
</h2>
<p>Below is an example of using default linear scaled axis. The x values are selected to demonstrate the situation that <span class="math inline">\(x\)</span> values are clustered at the lower side. As shown in the figure below, the details near <span class="math inline">\(x&lt;15\)</span> are hard to be seen.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/yh202109/mtb" class="external-link">mtb</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>
<span class="va">pdt</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">10</span>,<span class="fl">11.5</span>,<span class="fl">17</span>, <span class="fl">100</span>, <span class="fl">300</span><span class="op">)</span>, each<span class="op">=</span><span class="fl">5</span><span class="op">)</span>, gp<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">5</span><span class="op">)</span>,<span class="fl">7</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">pdt</span><span class="op">$</span><span class="va">y</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log10</a></span><span class="op">(</span><span class="va">pdt</span><span class="op">$</span><span class="va">x</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">pdt</span><span class="op">$</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>
<span class="va">p</span><span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">pdt</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">y</span>, group<span class="op">=</span><span class="va">gp</span>, color<span class="op">=</span><span class="va">gp</span><span class="op">)</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Purple-Heirloom Tomato Growth Chart"</span><span class="op">)</span>
<span class="va">p</span></code></pre></div>
<p><img src="vignette_mtb_axis_files/figure-html/unnamed-chunk-2-1.png" width="672" style="display: block; margin: auto;"></p>
<p>Below is an example that shows how to use <code><a href="../reference/trans_composition.html">trans_composition()</a></code> with break point set as 50. Distinct <span class="math inline">\(x\)</span> values above 50 are plotted with equal spaces in between.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">t</span><span class="op">=</span><span class="fu"><a href="../reference/trans_composition.html">trans_composition</a></span><span class="op">(</span><span class="va">pdt</span><span class="op">$</span><span class="va">x</span>, nb<span class="op">=</span><span class="fl">30</span>, brk<span class="op">=</span><span class="fl">50</span>, dab<span class="op">=</span><span class="fl">2</span>, dgrd<span class="op">=</span><span class="fl">1</span>, dgrd2<span class="op">=</span><span class="fl">0.2</span><span class="op">)</span> 
<span class="va">p</span><span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>trans<span class="op">=</span><span class="va">t</span><span class="op">)</span><span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept<span class="op">=</span><span class="va">t</span><span class="op">$</span><span class="va">brk</span>, lwd<span class="op">=</span><span class="fl">6</span>, alpha<span class="op">=</span><span class="fl">0.5</span>, color<span class="op">=</span><span class="st">'lightgray'</span><span class="op">)</span><span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span> x<span class="op">=</span><span class="op">-</span><span class="cn">Inf</span>, y<span class="op">=</span><span class="cn">Inf</span>, hjust<span class="op">=</span><span class="fl">0</span>, vjust<span class="op">=</span><span class="fl">1</span>, label<span class="op">=</span><span class="st">'Caution: X-axis scale is not linear above 50'</span>, color<span class="op">=</span><span class="st">'darkred'</span><span class="op">)</span></code></pre></div>
<p><img src="vignette_mtb_axis_files/figure-html/unnamed-chunk-3-1.png" width="672" style="display: block; margin: auto;"> Below is another example that shows how to use <code><a href="../reference/trans_composition.html">trans_composition()</a></code> with break point set as 0. In this example, all <span class="math inline">\(x\)</span> values are plotted with equal spaces in between.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">t</span><span class="op">=</span><span class="fu"><a href="../reference/trans_composition.html">trans_composition</a></span><span class="op">(</span><span class="va">pdt</span><span class="op">$</span><span class="va">x</span>, nb<span class="op">=</span><span class="fl">30</span>, brk<span class="op">=</span><span class="fl">0</span>, dab<span class="op">=</span><span class="fl">2</span>, dgrd<span class="op">=</span><span class="fl">1</span>, dgrd2<span class="op">=</span><span class="fl">1</span><span class="op">)</span> 
<span class="va">p</span><span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>trans<span class="op">=</span><span class="va">t</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span> x<span class="op">=</span><span class="op">-</span><span class="cn">Inf</span>, y<span class="op">=</span><span class="cn">Inf</span>, hjust<span class="op">=</span><span class="fl">0</span>, vjust<span class="op">=</span><span class="fl">1</span>, label<span class="op">=</span><span class="st">'Caution: X-axis scale is not linear'</span>, color<span class="op">=</span><span class="st">'darkred'</span><span class="op">)</span></code></pre></div>
<p><img src="vignette_mtb_axis_files/figure-html/unnamed-chunk-4-1.png" width="672" style="display: block; margin: auto;"> Below is an example that shows how to use <code><a href="../reference/trans_loglinear.html">trans_loglinear()</a></code>. The <code><a href="../reference/trans_loglinear.html">trans_loglinear()</a></code> transformation increases spaces between smaller x values and that might be only appropriate in certain situations.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">t</span><span class="op">=</span><span class="fu"><a href="../reference/trans_loglinear.html">trans_loglinear</a></span><span class="op">(</span><span class="va">pdt</span><span class="op">$</span><span class="va">x</span>, mindist<span class="op">=</span><span class="fl">0.03</span><span class="op">)</span> 
<span class="va">p</span><span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>trans<span class="op">=</span><span class="va">t</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span> x<span class="op">=</span><span class="op">-</span><span class="cn">Inf</span>, y<span class="op">=</span><span class="cn">Inf</span>, hjust<span class="op">=</span><span class="fl">0</span>, vjust<span class="op">=</span><span class="fl">1</span>, label<span class="op">=</span><span class="st">'Caution: X-axis scale is not linear'</span>, color<span class="op">=</span><span class="st">'darkred'</span><span class="op">)</span></code></pre></div>
<p><img src="vignette_mtb_axis_files/figure-html/unnamed-chunk-5-1.png" width="672" style="display: block; margin: auto;"></p>
<p>These transformations can work with <code><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" class="external-link">position_dodge()</a></code> and other adjustments.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Y Hsu.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
