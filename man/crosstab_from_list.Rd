% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cd_gt03summary.R
\name{crosstab_from_list}
\alias{crosstab_from_list}
\title{Create a crosstab from a data frame with optional percentage reporting}
\usage{
crosstab_from_list(
  df,
  rows,
  cols,
  perct_within_index = NULL,
  col_margin_perct = FALSE,
  row_margin_perct = FALSE,
  report_type = 1
)
}
\arguments{
\item{df}{A \code{data.frame}.}

\item{rows}{A character vector of column names in \code{df} to use as row keys.}

\item{cols}{A character vector of column names in \code{df} to use as column keys.}

\item{perct_within_index}{A character vector of column names (subset of \code{rows}
or \code{cols}) defining the grouping within which percentages are computed.
\code{NULL} (default) skips percentage calculation.}

\item{col_margin_perct}{Logical. Reserved for future use. Default \code{FALSE}.}

\item{row_margin_perct}{Logical. Reserved for future use. Default \code{FALSE}.}

\item{report_type}{An integer, either \code{1} (count and percent) or
\code{2} (count/total and percent). Default \code{1}.}
}
\value{
A named list with elements:
\describe{
  \item{count}{A data frame of raw counts with an \code{All} margin row and column.}
  \item{percent}{A data frame of percentages, or \code{NULL} if \code{perct_within_index} is \code{NULL}.}
  \item{report}{A data frame of formatted strings combining counts and percentages,
    or \code{NULL} if \code{perct_within_index} is \code{NULL}.}
  \item{total}{A data frame of group totals used for percentage calculation,
    or \code{NULL} if \code{perct_within_index} is \code{NULL}.}
}
}
\description{
\code{crosstab_from_list()} produces a crosstab (contingency table) from a
data frame, supporting multi-column row and column keys and optional
within-group percentage calculations.
}
\examples{
df <- data.frame(
    A = c('foo','foo', 'foo', 'foo', 'foo', 'foo', 'bar', 'bar', 'baz', 'baz', 'baz'),
    B = c('one','one','one','one', 'one', 'two', 'two', 'one', 'one', 'two', 'two'),
    C = c('y','x','x','x', 'y', 'x', 'y', 'x', 'y', 'x', 'y'),
    D = c('apple','apple','apple','apple', 'banana', 'apple', 
    'banana', 'apple', 'banana', 'apple', 'banana'),
    E = c('red','blue','red','red', 'red', 'blue', 'blue', 'red', 'blue', 'red', 'blue'),
    value = c(0,1,1,1, 2, 3, 4, 5, 6, 7, 8)
)
result <- crosstab_from_list(
    df = df,
    rows = c("A", "B", "C"),
    cols = c("D", "E"),
    perct_within_index = "A",
    col_margin_perct = TRUE,
    row_margin_perct = TRUE,
    report_type = 1
)
print(result$report)

}
